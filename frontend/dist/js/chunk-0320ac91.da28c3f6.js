(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0320ac91"],{"34c2":function(t,e,i){},3922:function(t,e,i){"use strict";var r=i("34c2"),s=i.n(r);s.a},"45bb":function(t,e,i){"use strict";var r=i("80de"),s=i.n(r);s.a},"4d53":function(t,e,i){"use strict";var r=i("8390"),s=i.n(r);s.a},"5e2c":function(t,e,i){t.exports=i.p+"img/no-img.88294ef3.png"},"80de":function(t,e,i){},8390:function(t,e,i){},"8a11":function(t,e,i){"use strict";var r=i("ae67"),s=i.n(r);s.a},ad9e:function(t,e,i){"use strict";i.r(e);var r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"container"},[i("div",[t.query?i("h3",[t._v(' Результаты поиска по запросу "'+t._s(t.query)+'" ')]):t._e()]),i("Sorting",{attrs:{count:t.count},on:{sortingProductPrice:t.sortingProductPrice,filterProduct:t.filterProduct}}),t.filter?i("Filtration",{attrs:{"filterable-list":t.products,"filterable-field":"manufacturer"},on:{filteredItem:t.filteredManufacturer}}):i("div"),i("div",{staticClass:"products"},t._l(t.productsFiltered,(function(t){return i("div",{key:t.title,staticClass:"item"},[i("Product",{attrs:{product:t}})],1)})),0)],1)},s=[],n=(i("55dd"),i("96cf"),i("3b8d")),c=(i("4917"),i("b414")),o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"product"},[t._m(0),i("div",{staticClass:"title",domProps:{textContent:t._s(t.product.title)}}),i("div",{staticClass:"manufacturer",domProps:{textContent:t._s(t.product.manufacturer)}}),i("div",{staticClass:"price",domProps:{textContent:t._s(t.product.price+" руб.")}}),i("b-button",{staticClass:"action",attrs:{variant:"success"},on:{click:t.toBasket}},[i("custom-icon",{staticClass:"custom-icon",attrs:{name:"shopping-cart"}}),i("span",[t._v("Купить")])],1)],1)},a=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"pic"},[r("img",{attrs:{id:"myImg",src:i("5e2c"),alt:""}})])}],u=i("f1dd"),l=(i("60c4"),{name:"Product",components:{customIcon:u["a"]},props:{product:{type:Object}},methods:{toBasket:function(){this.$router.push("/basket"),this.product.photo=document.getElementById("myImg").src,this.product.quantity=1,this.product.valueProduct=parseFloat((this.product.quantity*this.product.price).toFixed(1)),this.$store.commit("addProduct",this.product)}}}),d=l,f=(i("3922"),i("2877")),p=Object(f["a"])(d,o,a,!1,null,"625f0c9b",null),h=p.exports,m=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"sort-list"},[i("div",{staticClass:"counter"},[i("span",[t._v("Товаров: "+t._s(t.count))])]),i("div",{staticClass:"sorting"},[i("b-dropdown",{staticClass:"m-2",attrs:{split:"","split-variant":"outline-info",variant:"info",text:t.text}},[i("b-dropdown-item",{on:{click:t.sortingFromMin}},[t._v("От дешевых")]),i("b-dropdown-item",{on:{click:t.sortingFromMax}},[t._v("От дорогих")])],1),i("button",{staticClass:"btn btn-danger",attrs:{type:"button"},on:{click:t.filterProduct}},[t.state?i("i",[i("custom-icon",{staticClass:"custom-icon",attrs:{name:"filter"}})],1):i("i",[i("custom-icon",{staticClass:"custom-icon",attrs:{name:"activity"}})],1),i("span",[t._v("Фильтр")])])],1)])},v=[],b=(i("c5f6"),{name:"Sorting",components:{customIcon:u["a"]},props:{count:Number},data:function(){return{text:"Сортировка",state:!0}},methods:{sortingFromMin:function(){this.text="От дешевых",this.$emit("sortingProductPrice","min")},sortingFromMax:function(){this.text="От дорогих",this.$emit("sortingProductPrice","max")},filterProduct:function(){this.$emit("filterProduct",this.state),this.state=!this.state}}}),g=b,x=(i("4d53"),Object(f["a"])(g,m,v,!1,null,"7cca6f5e",null)),P=x.exports,y=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"filtered"},[i("b-form-group",{staticClass:"inline-group"},[i("b-form-checkbox-group",{attrs:{options:t.options,name:"flavour-1a"},model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}})],1),i("b-form-group",{staticClass:"stacked"},[i("b-form-checkbox-group",{attrs:{options:t.options,name:"flavour-2a",stacked:""},model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}})],1)],1)},_=[],C=(i("ac6a"),i("a30f")),k=i.n(C),F={name:"Filters",props:{filterableList:{type:Array},filterableField:{type:String}},data:function(){return{selected:[],options:[]}},methods:{createOptionsList:function(){var t=this;this.filterableList.forEach((function(e){e.text=e[t.filterableField]}));var e=k()(this.filterableList,"text"),i=[];for(var r in e)i.push(r);this.options=this.options.concat(i)},selectedItem:function(){this.$emit("filteredItem",this.selected)}},mounted:function(){this.createOptionsList()},watch:{selected:function(){this.selectedItem()}}},$=F,w=(i("8a11"),Object(f["a"])($,y,_,!1,null,"3259d20a",null)),q=w.exports,I={components:{Product:h,Filtration:q,Sorting:P},data:function(){return{query:"",filter:null,manufacturerFilter:null,products:[],count:0}},computed:{productsFiltered:function(){if(this.manufacturerFilter&&this.manufacturerFilter.length){var t=this.manufacturerFilter.join("|"),e=this.products.filter((function(e){return e.text.match(t)}));return this.count=e.length,e}return this.count=this.products.length,this.products}},methods:{loadProducts:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(e){var i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e&&e.length||(e=""),t.next=3,c["a"]("products",{query:e});case 3:i=t.sent,this.products=i.products,this.count=this.products.length;case 6:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),checkQueryAndLoadProducts:function(){this.$route.params.textseach!==this.query&&(this.query=this.$route.params.textseach,this.loadProducts(this.query))},sortingProductPrice:function(t){var e=function(e,i){return"min"===t?e.price>i.price?1:-1:"max"===t?e.price<i.price?1:-1:void 0};this.products.sort(e)},filterProduct:function(t){!0===t?this.filter=t:(this.filter=null,this.manufacturerFilter=null)},filteredManufacturer:function(t){this.manufacturerFilter=t}},mounted:function(){this.checkQueryAndLoadProducts()},updated:function(){""!==this.query&&void 0!==this.query||(this.$route.params.textseach="")},watch:{$route:function(){this.checkQueryAndLoadProducts()}}},L=I,O=(i("45bb"),Object(f["a"])(L,r,s,!1,null,"7fa4e51a",null));e["default"]=O.exports},ae67:function(t,e,i){}}]);
//# sourceMappingURL=chunk-0320ac91.da28c3f6.js.map